{% extends "base.html" %}
{% block head %}
    {{ person_form.media }}
    <script type="text/javascript">
        $(document).ready(function() {
            var options = {
               // dataType:   json,
                success:    processJson,
            };
            $('#editForm').ajaxForm(options);
        });

        function processJson(data) {
            if (data.status == 'ok') {
                $('#status').html("Information successfully updated.");
                $('#status').css({color: "green"});
            } else {
                $('#status').html("Updating error. Enter valid values.");
                $('#status').css({color: "red"});
            }
        }

        $(document).ajaxStart(function() { 
            $('#editForm input').attr("disabled", "disabled");
            $('#editForm textarea').attr("disabled", "disabled");
            $('#status').html("Sending form data...");
            $('#status').css({color: "blue"});
        }).ajaxStop(function() {
            $('#editForm input').removeAttr("disabled");
            $('#editForm textarea').removeAttr("disabled");
        });
    
    </script>
{% endblock %}

{% block content %}
<h1>42 Coffee Cups Test Asignment</h1>

<div id="status" style="color: red;"></div>

<form id="editForm" method="POST" action="{% url edit %}">
    {% csrf_token %}
    <table width="100%">
        <tr>
            <td>
                <table>
                    {{ person_form.as_table }}
                </table>
            </td>
            <td>
                <table>
                    {{ contacts_form.as_table }}
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" value="Edit" />
                <a href="{% url index %}">Cancel</a>
            </td>
        </tr>
    </table>
</form>
{% endblock %}
